{
    "injectionSelector": "L:text.html.markdown",
    "patterns": [
        { "include": "#addition" },
        { "include": "#deletion" },
        { "include": "#substitution" },
        { "include": "#comment" },
        { "include": "#highlight" },
        { "include": "#colored_format_highlight" },
        { "include": "#format_highlight" },
        { "include": "#citation_list" }
    ],
	"repository": {
		"addition": {
			"begin": "\\{\\+\\+",
			"end": "\\+\\+\\}",
			"name": "markup.inserted.mdmarkup",
			"contentName": "markup.inserted",
			"patterns": [
				{
					"match": ".",
					"name": "markup.inserted"
				}
			]
		},
		"deletion": {
			"begin": "\\{--",
			"end": "--\\}",
			"name": "markup.deleted.mdmarkup",
			"contentName": "markup.deleted",
			"patterns": [
				{
					"match": ".",
					"name": "markup.deleted"
				}
			]
		},
		"substitution": {
			"begin": "\\{\\~\\~",
			"end": "\\~\\~\\}",
			"name": "markup.changed.mdmarkup",
			"patterns": [
				{
					"begin": "~>",
					"beginCaptures": { "0": { "name": "punctuation.separator.mdmarkup" } },
					"end": "(?=~~\\})",
					"contentName": "markup.inserted",
					"patterns": [{ "match": ".", "name": "markup.inserted" }]
				},
				{
					"match": ".",
					"name": "markup.deleted"
				}
			]
		},
		"comment": {
			"begin": "\\{>>",
			"end": "<<\\}",
			"name": "comment.block.mdmarkup",
			"contentName": "comment.block",
			"patterns": [
				{
					"match": ".",
					"name": "comment.block"
				}
			]
		},
		"highlight": {
			"begin": "\\{==",
			"end": "==\\}",
			"name": "markup.bold.mdmarkup",
			"contentName": "markup.bold",
			"patterns": [
				{
					"match": ".",
					"name": "markup.bold"
				}
			]
		},
		"colored_format_highlight": {
			"match": "(?<!\\{)==([^}=]+)==\\{([a-z0-9-]+)\\}",
			"name": "markup.highlight.colored.mdmarkup",
			"captures": {
				"1": { "name": "markup.highlight" },
				"2": { "name": "entity.other.attribute-name.mdmarkup" }
			}
		},
		"format_highlight": {
			"match": "(?<!\\{)==([^}=]+)==(?!\\})",
			"name": "markup.highlight.mdmarkup",
			"captures": {
				"1": { "name": "markup.highlight" }
			}
		},
		"citation_list": {
			"begin": "\\[(?=\\s*@)",
			"beginCaptures": {
				"0": { "name": "punctuation.definition.brackets.begin.mdmarkup" }
			},
			"end": "\\]",
			"endCaptures": {
				"0": { "name": "punctuation.definition.brackets.end.mdmarkup" }
			},
			"name": "meta.citation.mdmarkup",
			"patterns": [
				{
					"match": "@[A-Za-z0-9_:-]+",
					"name": "support.function.citation.mdmarkup"
				},
				{
					"match": ";",
					"name": "punctuation.separator.sequence.mdmarkup"
				}
			]
		}
	},
    "scopeName": "mdmarkup.injection"
}