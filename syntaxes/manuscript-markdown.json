{
    "injectionSelector": "L:text.html.markdown -string -meta.embedded -markup.inline.raw -markup.fenced_code",
    "patterns": [
        { "include": "#citation_list" },
        { "include": "#footnote_ref" },
        { "include": "#footnote_def" },
        { "include": "#colored_format_highlight" },
        { "include": "#format_highlight" },
        { "include": "#addition" },
        { "include": "#deletion" },
        { "include": "#substitution" },
        { "include": "#highlight" },
        { "include": "#comment_with_id" },
        { "include": "#comment" },
        { "include": "#comment_range_start" },
        { "include": "#comment_range_end" }
    ],
	"repository": {
		"addition": {
			"begin": "\\{\\+\\+",
			"end": "\\+\\+\\}",
			"name": "markup.inserted.manuscript-markdown",
			"contentName": "markup.inserted"
		},
		"deletion": {
			"begin": "\\{--",
			"end": "--\\}",
			"name": "markup.deleted.manuscript-markdown",
			"contentName": "markup.deleted"
		},
		"substitution": {
			"begin": "\\{\\~\\~",
			"end": "\\~\\~\\}",
			"name": "markup.changed.manuscript-markdown",
			"contentName": "markup.deleted",
			"patterns": [
				{
					"begin": "~>",
					"beginCaptures": { "0": { "name": "punctuation.separator.manuscript-markdown" } },
					"end": "(?=~~\\})",
					"contentName": "markup.inserted"
				}
			]
		},
		"comment_with_id": {
			"begin": "(\\{#)([a-zA-Z0-9_-]++)(>>)",
			"beginCaptures": {
				"1": { "name": "punctuation.definition.tag.begin.manuscript-markdown" },
				"2": { "name": "entity.name.tag.manuscript-markdown" },
				"3": { "name": "punctuation.definition.tag.begin.manuscript-markdown" }
			},
			"end": "<<\\}",
			"endCaptures": {
				"0": { "name": "punctuation.definition.tag.end.manuscript-markdown" }
			},
			"contentName": "meta.comment.manuscript-markdown"
		},
		"comment": {
			"begin": "(\\{)(>>)",
			"beginCaptures": {
				"1": { "name": "punctuation.definition.tag.begin.manuscript-markdown" },
				"2": { "name": "punctuation.definition.tag.begin.manuscript-markdown" }
			},
			"end": "(<<)(\\})",
			"endCaptures": {
				"1": { "name": "punctuation.definition.tag.end.manuscript-markdown" },
				"2": { "name": "punctuation.definition.tag.end.manuscript-markdown" }
			},
			"name": "meta.comment.manuscript-markdown",
			"contentName": "meta.comment"
		},
		"comment_range_start": {
			"match": "(\\{#)([a-zA-Z0-9_-]++)(\\})",
			"captures": {
				"1": { "name": "punctuation.definition.tag.begin.manuscript-markdown" },
				"2": { "name": "entity.name.tag.manuscript-markdown" },
				"3": { "name": "punctuation.definition.tag.end.manuscript-markdown" }
			}
		},
		"comment_range_end": {
			"match": "(\\{/)([a-zA-Z0-9_-]++)(\\})",
			"captures": {
				"1": { "name": "punctuation.definition.tag.begin.manuscript-markdown" },
				"2": { "name": "entity.name.tag.manuscript-markdown" },
				"3": { "name": "punctuation.definition.tag.end.manuscript-markdown" }
			}
		},
		"highlight": {
			"begin": "(\\{)(==)",
			"beginCaptures": {
				"1": { "name": "punctuation.definition.tag.begin.manuscript-markdown" },
				"2": { "name": "punctuation.definition.tag.begin.manuscript-markdown" }
			},
			"end": "(==)(\\})",
			"endCaptures": {
				"1": { "name": "punctuation.definition.tag.end.manuscript-markdown" },
				"2": { "name": "punctuation.definition.tag.end.manuscript-markdown" }
			},
			"name": "markup.bold.manuscript-markdown",
			"contentName": "markup.bold"
		},
		"colored_format_highlight": {
			"match": "(?<!\\{)==([^}=]++)==\\{([a-z0-9](?:[a-z0-9-]*[a-z0-9])?)\\}",
			"name": "markup.highlight.colored.manuscript-markdown",
			"captures": {
				"1": { "name": "markup.highlight" },
				"2": { "name": "entity.other.attribute-name.manuscript-markdown" }
			}
		},
		"format_highlight": {
			"match": "(?<!\\{)==([^}=]++)==(?!\\})",
			"name": "markup.highlight.manuscript-markdown",
			"captures": {
				"1": { "name": "markup.highlight" }
			}
		},
		"footnote_ref": {
			"match": "(\\[\\^)([a-zA-Z0-9_-]++)(\\])(?!:)",
			"captures": {
				"1": { "name": "punctuation.definition.footnote.begin.manuscript-markdown" },
				"2": { "name": "entity.name.footnote.manuscript-markdown" },
				"3": { "name": "punctuation.definition.footnote.end.manuscript-markdown" }
			}
		},
		"footnote_def": {
			"match": "^(\\[\\^)([a-zA-Z0-9_-]++)(\\]:)",
			"captures": {
				"1": { "name": "punctuation.definition.footnote.begin.manuscript-markdown" },
				"2": { "name": "entity.name.footnote.manuscript-markdown" },
				"3": { "name": "punctuation.definition.footnote.end.manuscript-markdown" }
			}
		},
		"citation_list": {
			"begin": "\\[(?=\\s*@)",
			"beginCaptures": {
				"0": { "name": "punctuation.definition.brackets.begin.manuscript-markdown" }
			},
			"end": "\\]",
			"endCaptures": {
				"0": { "name": "punctuation.definition.brackets.end.manuscript-markdown" }
			},
			"name": "meta.citation.manuscript-markdown",
			"patterns": [
				{
					"match": "@[A-Za-z0-9_:-]++",
					"name": "support.function.citation.manuscript-markdown"
				},
				{
					"match": ";",
					"name": "punctuation.separator.sequence.manuscript-markdown"
				}
			]
		}
	},
    "scopeName": "manuscript-markdown.injection"
}